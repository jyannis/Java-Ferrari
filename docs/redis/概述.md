



Redis概述中包括了一些我们需要知道的Redis相关的基本概念，例如它的优点、内容、使用场景、如何开启关闭等等。

**目录**

- [Redis为什么速度快](#Redis为什么速度快)
- [Redis有哪些数据结构](#Redis有哪些数据结构)
- [Redis可以做什么（使用场景）](#Redis可以做什么)
- [Redis是否支持事务](#Redis是否支持事务)
- [如何启动Redis](#如何启动Redis)
- [Redis的关闭过程](#Redis的关闭过程)

<br/>

<br/>

<br/>

## Redis为什么速度快

1. 内存数据库

   Redis是基于内存的，而我们都知道内存访问速度远快于磁盘访问。

2. IO多路复用技术（使用epoll）

   **多路复用**是网络IO中非常重要的一个概念，由于篇幅有限这里就不多赘述了，希望不太了解的读者要自行好好查阅。

3. 单线程架构

   Redis是单线程的架构，这意味着没有多线程的上下文切换开销。

<br/>

<br/>

## Redis有哪些数据结构

- 字符串String
  - 基于字符串还演变出位图Bitmaps和HyperLogLog
- 哈希Hash
- 列表List
- 集合Set
- 有序集合Zset

<br/>

<br/>

## Redis可以做什么

1. 一般缓存

   使用字符串String

2. 排行榜

   使用有序集合Zset

3. 计数器

   使用字符串String

4. 社交网络

   使用集合Set

5. 消息队列

   一般不用。有专门的消息队列例如RocketMQ等，它们具有更好的封装性，功能更强大。

<br/>

<br/>

## Redis是否支持事务

Redis 通过 MULTI（进入事务）、EXEC（执行）、WATCH 等命令来实现事务(transaction)功能。事务提供了一种将多个命令请求打包，然后一次性、按顺序地执行多个命令的机制，并且在事务执行期间，服务器不会中断事务而改去执行其他客户端的命令请求，它会将事务中的所有命令都执行完毕，然后才去处理其他客户端的命令请求。

但Redis不支持回滚。Redis命令在事务中可能会执行失败，但是Redis事务不会回滚，而是继续会执行余下的命令。设计为“不支持回滚”是因为：

- 只有当发生语法错误了(这个问题在命令队列时无法检测到)，Redis命令才会执行失败。这意味着这些都是程序性错误，这类错误在开发的过程中就能够发现并解决掉，几乎不会出现在生产环境。
- 由于不需要回滚，这使得Redis内部更加简单，而且运行速度更快。

可以参考：[Redis事务详解](https://baijiahao.baidu.com/s?id=1613631210471699441&wfr=spider&for=pc)

<br/>

<br/>

## 如何启动Redis

最好是通过配置文件.conf启动，具有良好的灵活性。

另外还有两种方式可以启动Redis，但是都不如通过配置文件启动好，只要知道可以修改.conf配置文件然后让Redis按照我们想要的配置来启动即可。

<br/>

<br/>

## Redis的关闭过程

优雅的关闭方式：使用redis-cli shutdown：

1. 断开与客户端的连接
2. 持久化文件生成（默认是RDB）

如果直接kill -9强制杀死Redis服务，不但不会做持久化操作，还会造成缓冲区等资源不能被优雅关闭，极端情况会造成AOF和复制数据丢失的情况。这和Redis宕机是一样的。



